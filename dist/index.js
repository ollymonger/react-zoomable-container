import e,{createContext as o,useContext as n,useState as t,useRef as i}from"react";var r=function(o){var n=o.scale,t=o.position,i=o.children;return e.createElement("div",{style:{transform:"scale(".concat(n,") translate(").concat(t.x,"px, ").concat(t.y,"px)"),transformOrigin:"50% 50%",height:"100%",width:"100%"}},i)},a=300,c=.8,l={x:0,y:0},s=.2,m=.2,f=1.8,p=!1,u=o({handleReset:function(){},zoomIn:function(){},zoomOut:function(){},info:{scale:0,position:{x:0,y:0}},controlOverrides:{scale:c,position:{x:l.x,y:l.y},lerpTime:a,scaleStep:s,minScale:m,maxScale:f},controls:{pan:{locked:!1,setLocked:function(){}},zoom:{locked:!1,setLocked:function(){}}}}),d=function(){return n(u)},x=function(e){var o=e.event,n=e.setScale,t=e.scale,i=e.controlOverrides;if(!(e.zoomLock||i&&i.disableZoom)){var r=t-.01*o.deltaY*(i&&i.scaleStep?i.scaleStep:s),c=i&&i.lerpTime?i.lerpTime:a,l=performance.now(),p=function(e){var o=e-l,a=Math.min(o/c,1),s=Math.max(i&&i.minScale?i.minScale:m,Math.min(i&&i.maxScale?i.maxScale:f,t+(r-t)*a));n(s),a<1&&requestAnimationFrame(p)};requestAnimationFrame(p)}},v=function(e){var o=e.event,n=e.setPosition,t=e.position,i=e.lerpTime;if(!e.panLock){var r=o.pageX-t.x,a=o.pageY-t.y,c=performance.now(),l=function(e){var o=performance.now()-c,l=Math.min(o/i,1),s=g(t.x,e.pageX-r,l),m=g(t.y,e.pageY-a,l);n({x:s,y:m})},s=function(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",s)}},b=function(e){var o=e.event,n=e.setPosition,t=e.position,i=e.lerpTime;if(!e.panLock){var r=o.touches[0].pageX-t.x,a=o.touches[0].pageY-t.y,c=performance.now(),l=function(e){var o=performance.now()-c,l=Math.min(o/i,1),s=g(t.x,e.touches[0].pageX-r,l),m=g(t.y,e.touches[0].pageY-a,l);n({x:s,y:m})},s=function(){document.removeEventListener("touchmove",l),document.removeEventListener("touchend",s)};document.addEventListener("touchmove",l),document.addEventListener("touchend",s)}},g=function(e,o,n){return e*(1-n)+o*n},S=function(e){var o=e.inOrOut,n=e.setScale,t=e.scale,i=e.controlOverrides;if(!i||!i.disableZoom){var r=t+("in"===o?i&&i.scaleStep?i.scaleStep:s:-(i&&i.scaleStep?i.scaleStep:s)),c=i&&i.lerpTime?i.lerpTime:a,l=performance.now(),p=function(e){var o=e-l,a=Math.min(o/c,1),s=Math.max(i&&i.minScale?i.minScale:m,Math.min(i&&i.maxScale?i.maxScale:f,t+(r-t)*a));n(s),a<1&&requestAnimationFrame(p)};requestAnimationFrame(p)}},k=function(){var o=d(),n=o.handleReset,t=o.zoomIn,i=o.zoomOut,r=o.info,a=o.controls,c=a.pan,l=c.locked,s=c.setLocked,m=a.zoom,f=m.locked,p=m.setLocked,u=o.controlOverrides,x=e.useMemo((function(){return u&&u.maxScale?r.scale>=u.maxScale:f}),[u,r.scale,f]),v=e.useMemo((function(){return u&&u.minScale?r.scale<=u.minScale:f}),[u,r.scale,f]);return e.createElement("div",{style:{position:"absolute",width:"150px",top:"10px",right:"10px",backgroundColor:"#ffffff",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",borderRadius:"5px",padding:"10px",display:"flex",flexDirection:"column",alignItems:"center",zIndex:100}},e.createElement("h2",{style:{fontSize:"20px",margin:"0 0 10px"}},"Controls"),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},e.createElement("button",{style:{backgroundColor:"#007bff",color:"#ffffff",border:"2px solid #007bff",borderRadius:"5px",padding:"10px 20px",fontSize:"12px",marginBottom:"10px"},onClick:n},"Reset"),e.createElement("button",{style:{backgroundColor:"#007bff",color:"#ffffff",border:"2px solid #007bff",borderRadius:"5px",padding:"10px 20px",fontSize:"12px",marginBottom:"10px",cursor:f?"not-allowed":"pointer"},onClick:t,disabled:x},"Zoom In"),e.createElement("button",{style:{backgroundColor:"#007bff",color:"#ffffff",border:"2px solid #007bff",borderRadius:"5px",padding:"10px 20px",fontSize:"12px",marginBottom:"10px",cursor:f?"not-allowed":"pointer"},onClick:i,disabled:v},"Zoom Out"),e.createElement("button",{style:{backgroundColor:"#007bff",color:"#ffffff",border:"2px solid #007bff",borderRadius:"5px",padding:"10px 20px",fontSize:"12px",marginBottom:"10px"},onClick:function(){return s(!l)}},l?"Unlock Pan":"Lock Pan"),e.createElement("button",{style:{backgroundColor:"#007bff",color:"#ffffff",border:"2px solid #007bff",borderRadius:"5px",padding:"10px 20px",fontSize:"12px",marginBottom:"10px"},onClick:function(){return p(!f)}},f?"Unlock Zoom":"Lock Zoom")),e.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"10px"}},e.createElement("h5",{style:{fontSize:"16px",margin:"0"}},"Scale"),e.createElement("p",{style:{fontSize:"14px",margin:"0"}},r.scale.toFixed(2)),e.createElement("h5",{style:{fontSize:"16px",margin:"10px 0 0"}},"Position"),e.createElement("p",{style:{fontSize:"14px",margin:"0"}},"x: ".concat(r.position.x.toFixed(2),", y: ").concat(r.position.y.toFixed(2)))))},h={container:{display:"flex",height:"100%",width:"100%"}};function y(o){var n=o.children,s=o.customControls,m=o.controlOverrides,f=t(m&&m.scale?null==m?void 0:m.scale:c),d=f[0],g=f[1],y=t(m&&m.disableZoom?null==m?void 0:m.disableZoom:p),E=y[0],z=y[1],L=t(m&&m.disablePan?null==m?void 0:m.disablePan:p),O=L[0],C=L[1],T=t(m&&m.position?null==m?void 0:m.position:l),w=T[0],M=T[1],P=i(null),R=e.useCallback((function(){g(1),M((null==m?void 0:m.position)||l)}),[]),I=e.useCallback((function(){E||S({inOrOut:"in",setScale:g,scale:d,controlOverrides:m})}),[d,m,g,S,E]),Z=e.useCallback((function(){E||S({inOrOut:"out",setScale:g,scale:d,controlOverrides:m})}),[d,m,g,S,E]),F=e.useCallback((function(e){"zoom"!==e?C((function(e){return!e})):z((function(e){return!e}))}),[]);return e.createElement("div",{ref:P,onWheel:function(e){x({event:e,setScale:g,scale:d,controlOverrides:m,zoomLock:E})},onMouseDown:function(e){e.preventDefault(),v({event:e,setPosition:M,position:w,lerpTime:m&&m.lerpTime?m.lerpTime:a,panLock:O})},onTouchStart:function(e){e.preventDefault(),b({event:e,setPosition:M,position:w,lerpTime:m&&m.lerpTime?m.lerpTime:a,panLock:O})},style:h.container},e.createElement(u.Provider,{value:{handleReset:R,zoomIn:I,zoomOut:Z,info:{scale:d,position:w},controlOverrides:m,controls:{pan:{locked:O,setLocked:function(){return F("pan")}},zoom:{locked:E,setLocked:function(){return F("zoom")}}}}},s||e.createElement(k,null),e.createElement(r,{scale:d,position:w},n)))}export{r as Container,k as Controls,a as DEFAULT_LERP_TIME,p as DEFAULT_LOCK_STATE,f as DEFAULT_MAX_SCALE,m as DEFAULT_MIN_SCALE,l as DEFAULT_POSITION,c as DEFAULT_SCALE,s as DEFAULT_SCALE_STEP,y as ZoomableContainer,u as ZoomableContainerContext,v as onMouseDown,b as onTouchStart,x as onWheel,d as useZoomableContext,S as zoom};
//# sourceMappingURL=index.js.map
